<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Zendesk Clone - Sistema de Tickets</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body {
            display: flex;
            height: 100vh;
            overflow: hidden;
        }
        .sidebar {
            width: 250px;
            background: #1E1E2D;
            color: white;
            padding: 20px;
        }
        .sidebar h4 {
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
            margin-bottom: 20px;
        }
        .sidebar a, .btn {
            color: white;
            display: block;
            padding: 10px;
            text-decoration: none;
            border: none;
            background: none;
        }
        .sidebar a:hover, .btn:hover {
            background: #29293d;
            border-radius: 5px;
        }
        .main-content {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            background: #f9f9f9;
        }
        .main-content h2 {
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <!-- Sidebar -->
    <div class="sidebar">
        <h4>Sistema de Tickets</h4>
        <a href="#" onclick="filtrarTickets('aberto')">ðŸŸ¢ Abertos</a>
        <a href="#" onclick="filtrarTickets('progresso')">ðŸŸ¡ Em Progresso</a>
        <a href="#" onclick="filtrarTickets('aguardando')">ðŸŸ  Aguardando Resposta</a>
        <a href="#" onclick="filtrarTickets('resolvido')">ðŸ”µ Resolvidos</a>
        <hr>
        <button class="btn btn-success w-100" onclick="novoTicket()">+ Novo Ticket</button>
    </div>

    <!-- ConteÃºdo Principal -->
    <div class="main-content">
        <h2>Tickets</h2>
        <table class="table table-striped">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>TÃ­tulo</th>
                    <th>ResponsÃ¡vel</th>
                    <th>Status</th>
                    <th>AÃ§Ãµes</th>
                </tr>
            </thead>
            <tbody id="ticketList"></tbody>
        </table>
    </div>

    <!-- Scripts -->
    <script>
        document.addEventListener("DOMContentLoaded", carregarTickets);

        // Carrega tickets do LocalStorage
        function carregarTickets() {
            const tickets = JSON.parse(localStorage.getItem("tickets")) || [];
            renderizarTickets(tickets);
        }

        // Renderiza a lista de tickets em uma tabela
        function renderizarTickets(tickets) {
            const tabela = document.getElementById("ticketList");
            tabela.innerHTML = "";

            if (tickets.length === 0) {
                tabela.innerHTML = "<tr><td colspan='5' class='text-center'>Nenhum ticket encontrado!</td></tr>";
                return;
            }

            tickets.forEach((ticket, index) => {
                const statusCor = {
                    "aberto": "success",
                    "progresso": "warning",
                    "aguardando": "danger",
                    "resolvido": "primary"
                }[ticket.status] || "secondary";

                const row = `
                    <tr>
                        <td>${index + 1}</td>
                        <td>${ticket.titulo}</td>
                        <td>${ticket.responsavel || "NÃ£o atribuÃ­do"}</td>
                        <td><span class="badge bg-${statusCor}">${ticket.status.toUpperCase()}</span></td>
                        <td>
                            <button class="btn btn-info btn-sm" onclick="visualizarTicket(${index})">Ver</button>
                            <button class="btn btn-danger btn-sm" onclick="excluirTicket(${index})">Excluir</button>
                        </td>
                    </tr>`;
                tabela.innerHTML += row;
            });
        }

        // Filtra os tickets por status
        function filtrarTickets(status) {
            const tickets = JSON.parse(localStorage.getItem("tickets")) || [];
            const filtrados = tickets.filter(ticket => ticket.status === status);
            renderizarTickets(filtrados);
        }

        // Cria um novo ticket
        function novoTicket() {
            const titulo = prompt("TÃ­tulo do Ticket:");
            const descricao = prompt("DescriÃ§Ã£o do Ticket:");
            const responsavel = prompt("ResponsÃ¡vel pelo Ticket:");

            if (!titulo || !descricao) {
                alert("Preencha todos os campos!");
                return;
            }

            const tickets = JSON.parse(localStorage.getItem("tickets")) || [];
            tickets.push({
                titulo,
                descricao,
                responsavel,
                status: "aberto",
                comentarios: [],
                anexos: []
            });

            localStorage.setItem("tickets", JSON.stringify(tickets));
            carregarTickets();
        }

        // Exclui um ticket
        function excluirTicket(index) {
            const confirmacao = confirm("Deseja realmente excluir este ticket?");
            if (!confirmacao) return;

            const tickets = JSON.parse(localStorage.getItem("tickets")) || [];
            tickets.splice(index, 1);
            localStorage.setItem("tickets", JSON.stringify(tickets));
            carregarTickets();
        }

        // Visualiza um ticket (detalhes e interaÃ§Ãµes)
        function visualizarTicket(index) {
            const tickets = JSON.parse(localStorage.getItem("tickets")) || [];
            const ticket = tickets[index];

            const novaDescricao = prompt("DescriÃ§Ã£o Atual:", ticket.descricao);
            if (novaDescricao !== null) {
                ticket.descricao = novaDescricao;
                localStorage.setItem("tickets", JSON.stringify(tickets));
                carregarTickets();
            }
        }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>